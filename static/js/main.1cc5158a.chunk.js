(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{103:function(e,t,a){e.exports={ava:"User_ava__PrVOE",nameAndStatus:"User_nameAndStatus__3guBE",avaAndFollow:"User_avaAndFollow__DqU7b",userCont:"User_userCont__3hm4v",location:"User_location__2kUVl"}},168:function(e,t,a){e.exports={arrow:"Pagination_arrow__3jRSn"}},173:function(e,t,a){e.exports={posts:"MyPosts_posts__3rYAx",myPostField:"MyPosts_myPostField__3rvZE"}},223:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(45),r=a(18),o="my-app/dialogs/SEND-MESSAGE",l={messageData:[{id:1,name:"Jack Stauber",imgURL:"https://7lafa.com/musicians/jack_stauber.jpg",message:["Hello"]},{id:2,name:"Mac DeMarco",imgURL:"https://media.gq.com/photos/5ca78f84e03e8148480e5219/master/w_1600%2Cc_limit/mac-demarco-gq-may-2019-02.jpg",message:["How ya doin'"]}]},c=function(e,t){return{type:o,id:e,currentMessage:t}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(r.a)({},e,{messageData:e.messageData.map((function(e){return e.id===t.id?Object(r.a)({},e,{message:[].concat(Object(n.a)(e.message),[t.currentMessage])}):Object(r.a)({},e,{message:Object(n.a)(e.message)})}))});default:return e}}},229:function(e,t,a){e.exports={allPages:"Users_allPages__2R9cv"}},241:function(e,t,a){e.exports={ldsRipple:"Preloader_ldsRipple__2C_Jp"}},25:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(131),r=a(0),o=a.n(r),l=a(177),c=a(261),u=a(507),i=function(e){var t=e.input,a=e.touched,r=e.meta,u=e.wrapperCol,i=e.inputType,s=e.inputStyle,p=Object(n.a)(e,["input","touched","meta","wrapperCol","inputType","inputStyle"]),m=!!a||r.touched,f=r.error&&m;return o.a.createElement(c.a.Item,{wrapperCol:u,hasFeedback:!0,validateStatus:f?"error":"",help:f&&r.error,style:{marginBottom:"0"}},function(e,t,a,r){var c=e.rows,u=Object(n.a)(e,["rows"]),i=l.a.Password,s=l.a.TextArea;return"input"===a?"password"===u.type?o.a.createElement(i,Object.assign({style:r},u,t)):o.a.createElement(l.a,Object.assign({style:r},u,t)):"textArea"===a?o.a.createElement(s,Object.assign({style:r,rows:c},u,t)):void 0}(p,t,i,s))},s=function(e){e.input;var t=Object(n.a)(e,["input"]);return o.a.createElement(c.a.Item,null,o.a.createElement(u.a,null,t.checkboxDescription))}},250:function(e,t,a){e.exports={header:"Header_header__2VqTr",logBut:"Header_logBut__2c-G1",siteLogo:"Header_siteLogo__372Rg"}},251:function(e,t,a){e.exports=a.p+"static/media/logo.c78f9214.bmp"},252:function(e,t,a){e.exports={serverError:"FormsContorls_serverError__QysQg"}},288:function(e,t,a){e.exports=a(506)},293:function(e,t,a){},294:function(e,t,a){},506:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),l=a.n(o),c=(a(293),a(70)),u=a(71),i=a(74),s=a(73),p=(a(294),a(27)),m=a(516),f=a(50),d=function(){return r.a.createElement(f.b,{style:{height:"100vh",position:"fixed"},width:200,className:"site-layout-background",mode:"inline"},r.a.createElement(m.a,{theme:"dark",mode:"inline"},r.a.createElement(m.a.Item,{key:"1"},r.a.createElement(p.b,{to:"/profile"},"Profile")),r.a.createElement(m.a.Item,{key:"2"},r.a.createElement(p.b,{to:"/dialogs"},"Messages")),r.a.createElement(m.a.Item,{key:"3"},r.a.createElement(p.b,{to:"/news"},"News")),r.a.createElement(m.a.Item,{key:"4"},r.a.createElement(p.b,{to:"/music"},"Music")),r.a.createElement(m.a.Item,{key:"5"},r.a.createElement(p.b,{to:"/settings"},"Settings")),r.a.createElement(m.a.Item,{key:"6"},r.a.createElement(p.b,{to:"/users"},"Users"))))},E=a(36),g=function(){return r.a.createElement("div",null,"News")},h=function(){return r.a.createElement("div",null,"Music")},b=function(){return r.a.createElement("div",null,"Settings")},y=a(229),v=a.n(y),O=a(168),w=a.n(O),_=a(175),S=a(231),P=a.n(S),j=a(230),k=a.n(j),I=function(e){var t=e.direction;return"right"===t?r.a.createElement(k.a,{key:"arrowRight",className:w.a.arrow}):"left"===t?r.a.createElement(P.a,{key:"arrowLeft",className:w.a.arrow}):void 0},C=function(e){for(var t=e.pageSize,a=e.totalCount,n=e.currentPage,o=e.onPageChanged,l=[],c=Math.ceil(a/t),u=n+3>=c?c:n+3,i=function(e){l.push(r.a.createElement(_.a,{key:e,type:e===n?"primary":"",onClick:function(){return o(e)}},e))},s=1===n?u++&&1:n-1>=c-3?c-3-1:n-1;s<=u;s++)i(s);return[r.a.createElement(_.a,{key:"start",onClick:function(){return o(1)}},1),r.a.createElement(I,{direction:"left"})].concat(l,[r.a.createElement(I,{direction:"right"}),r.a.createElement(_.a,{key:"end",onClick:function(){return o(c)}},c)])},T=a(103),U=a.n(T),N=a(515),A=a(509),x=a(510),F=a(511),L=a(72),D=a.n(L),R=function(e){var t=e.handlerToggleFollow,a=e.followedUsersId,n=e.user,o=N.a.Title;return r.a.createElement(A.a,{gutter:[0,24]},r.a.createElement(x.a,{span:24},r.a.createElement("div",{className:U.a.userCont},r.a.createElement("div",{className:U.a.avaAndFollow},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/profile/".concat(n.id)},r.a.createElement(F.a,{size:70,src:n.photos.small,icon:r.a.createElement(D.a,null)}))),r.a.createElement("div",null,r.a.createElement(_.a,{type:n.followed?"":"primary",danger:n.followed,disabled:a.some((function(e){return e===n.id})),onClick:function(){return t(n.id,n.followed)}},n.followed?"UNFOLLOW":"FOLLOW"))),r.a.createElement("div",{className:U.a.nameAndStatus},r.a.createElement(o,{level:4},n.name),r.a.createElement("div",null,n.status)),r.a.createElement("div",{className:U.a.location},r.a.createElement("div",null,"user.location.city"),r.a.createElement("div",null,"user.location.country")))))},M=function(e){var t=e.users.map((function(t){return r.a.createElement(R,{key:t.id,handlerToggleFollow:e.handlerToggleFollow,user:t,followedUsersId:e.followedUsersId})}));return r.a.createElement("div",null,r.a.createElement(A.a,null,r.a.createElement(x.a,{span:24},t)),r.a.createElement("div",{className:v.a.allPages},r.a.createElement(C,{pageSize:e.pageSize,totalCount:e.totalCount,currentPage:e.currentPage,onPageChanged:e.onPageChanged})))},z=a(19),G=a(12),J=a.n(G),H=a(24),B=a(45),V=a(18),q=a(240).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"dbf5504c-f2e0-4dbe-bf14-76c4460daab1"}}),W=function(e,t){return q.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},Q=function(e){return q.post("follow/".concat(e)).then((function(e){return e.data}))},Y=function(e){return q.delete("follow/".concat(e)).then((function(e){return e.data}))},Z=function(e){return q.get("profile/".concat(e)).then((function(e){return e.data}))},X=function(e){return q.get("profile/status/".concat(e)).then((function(e){return e.data}))},K=function(e){return q.put("profile/status",{status:e})},$=function(e){var t=new FormData;return t.append("image",e),q.put("profile/photo",t,{"Content-Type":"multipart/form-data"}).then((function(e){return e.data}))},ee=function(e){return q.put("profile",e)},te=function(){return q.get("auth/me").then((function(e){return e.data}))},ae=function(e,t,a,n){return q.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}).then((function(e){return e.data}))},ne=function(){return q.delete("auth/login").then((function(e){return e.data}))},re=function(){return q.get("security/get-captcha-url").then((function(e){return e.data}))},oe="my-app/users/TOGGLE_FOLLOW",le="my-app/users/SET_USERS",ce={users:[],totalCount:0,pageSize:5,currentPage:1,isFetching:!0,followedUsersId:[]},ue=function(e){return{type:oe,userId:e}},ie=function(e){return{type:"my-app/users/SET_CURRENT_PAGE",currentPage:e}},se=function(e){return{type:le,users:e}},pe=function(e){return{type:"my-app/users/SET_TOTAL_USERS_COUNT",totalCount:e}},me=function(e){return{type:"my-app/users/TOGGLE_IS_FETCHING",isFetching:e}},fe=function(e,t){return{type:"my-app/users/FOLLOWING_IN_PROGRESS",isFollowing:e,userId:t}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(V.a)({},e,{users:e.users.map((function(e){return t.userId===e.id?Object(V.a)({},e,{followed:!e.followed}):e}))});case le:return Object(V.a)({},e,{users:Object(B.a)(t.users)});case"my-app/users/SET_CURRENT_PAGE":return Object(V.a)({},e,{currentPage:t.currentPage});case"my-app/users/SET_TOTAL_USERS_COUNT":return Object(V.a)({},e,{totalCount:t.totalCount});case"my-app/users/TOGGLE_IS_FETCHING":return Object(V.a)({},e,{isFetching:t.isFetching});case"my-app/users/FOLLOWING_IN_PROGRESS":return Object(V.a)({},e,{followedUsersId:t.isFollowing?[].concat(Object(B.a)(e.followedUsersId),[t.userId]):Object(B.a)(e.followedUsersId.filter((function(e){return t.userId!==e})))});default:return e}},Ee=a(241),ge=a.n(Ee),he=function(e){return r.a.createElement("div",{className:ge.a.ldsRipple},r.a.createElement("div",null),r.a.createElement("div",null))},be=a(10),ye=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.getUsers(e.props.pageSize,t)},e.handlerToggleFollow=function(t,a){e.props.followingInProgress(!0,t),a?e.props.unfollow(t):e.props.follow(t)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.pageSize,this.props.currentPage)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(he,null):r.a.createElement(M,{handlerToggleFollow:this.handlerToggleFollow,users:this.props.users,currentPage:this.props.currentPage,totalCount:this.props.totalCount,onPageChanged:this.onPageChanged,pageSize:this.props.pageSize,followingInProgress:this.props.followingInProgress,followedUsersId:this.props.followedUsersId,follow:this.props.follow,unfollow:this.props.unfollow}))}}]),a}(r.a.Component),ve=Object(be.d)(Object(z.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,currentPage:e.usersPage.currentPage,totalCount:e.usersPage.totalCount,isFetching:e.usersPage.isFetching,followedUsersId:e.usersPage.followedUsersId}}),{setUsers:se,setCurrentPage:ie,setTotalUsersCount:pe,toggleIsFetching:me,followingInProgress:fe,getUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var a=Object(H.a)(J.a.mark((function a(n){var r;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(me(!0)),a.next=3,W(e,t);case 3:r=a.sent,n(me(!1)),n(se(r.items)),n(pe(r.totalCount)),n(ie(t));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},follow:function(e){return function(t){Q(e).then((function(a){0===a.resultCode?(t(ue(e)),t(fe(!1,e))):console.error("Server error(postFollow)")}))}},unfollow:function(e){return function(){var t=Object(H.a)(J.a.mark((function t(a){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:if(0===t.sent.resultCode){t.next=6;break}return console.error("Server error(deleteFollow)"),t.abrupt("return");case 6:a(ue(e)),a(fe(!1,e));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(ye),Oe=a(43),we=a(62),_e=a.n(we),Se=a(25),Pe=a(224),je=a(225),ke=function(e){return e?void 0:"Field is required"},Ie=function(e){return function(t){if(t)return t.length>e?"Max length is ".concat(e):void 0}},Ce=function(e){return r.a.createElement("span",{style:{color:"lightgray"}},"No data")},Te=a(101),Ue=Ie(20),Ne=Object(je.a)({form:"status"})((function(e){var t=e.editMode,a=e.handleSubmit,n=e.activateEditMode,o=e.status;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("form",{onBlur:a},r.a.createElement(Pe.a,{name:"status",inputType:"input",component:Se.b,validate:[Ue],autoFocus:!0,touched:!0,wrapperCol:{span:18}})):r.a.createElement("span",{onDoubleClick:n},o?r.a.createElement(Te.a,{placement:"bottom",title:"Double click to change status"}," ",o," "):r.a.createElement(Ce,null)))})),Ae=function(e){var t=Object(n.useState)(!1),a=Object(Oe.a)(t,2),o=a[0],l=a[1];return r.a.createElement("div",null,r.a.createElement(Ne,{initialValues:{status:e.status},status:e.status,onSubmit:function(t){var a;a=t.status,l(!1),e.updateStatus(a)},editMode:o,activateEditMode:function(){e.myId===e.currentId&&l(!0)}}))},xe=a(512),Fe=function(e){var t,a=e.profile,n=e.activateEditMode,o=e.currentId,l=e.myId;return void 0===a.lookingForAJob?t=r.a.createElement(Ce,null):!1===a.lookingForAJob?t="No":!0===a.lookingForAJob&&(t="Yes"),r.a.createElement(A.a,{className:_e.a.profileInfo},r.a.createElement(x.a,{span:24},r.a.createElement(A.a,null,r.a.createElement(x.a,{span:10},r.a.createElement("b",null,"lookingForAJob: "))," ",r.a.createElement(x.a,{span:14},t)),r.a.createElement(A.a,null,r.a.createElement(x.a,{span:10}," ",r.a.createElement("b",null,"lookingForAJobDescription: ")),r.a.createElement(x.a,{span:14},a.lookingForAJobDescription||r.a.createElement(Ce,null))),r.a.createElement(A.a,null,r.a.createElement(x.a,{span:24}," ",r.a.createElement(xe.a,{orientation:"left"},"Contacts: "))),Object.keys(a.contacts).map((function(e){return r.a.createElement(A.a,{key:e},r.a.createElement(x.a,{span:4,offset:3,key:e},r.a.createElement("b",null,e,": ")),r.a.createElement(x.a,{span:17},a.contacts[e]||r.a.createElement(Ce,null)))})),r.a.createElement(A.a,null,r.a.createElement(x.a,{span:5}," ",r.a.createElement("b",null,"aboutMe: ")),r.a.createElement(x.a,{span:10},a.aboutMe||r.a.createElement(Ce,null))),r.a.createElement(A.a,null,r.a.createElement(x.a,{span:24},o===l?r.a.createElement(_.a,{style:{width:"100%"},onClick:n},"EDIT PROFILE"):null))))},Le=r.a.memo((function(e){var t=e.handleSubmit,a=e.profile;return r.a.createElement("div",{className:_e.a.profileInfo},r.a.createElement("form",{onSubmit:t},r.a.createElement(Pe.a,{name:"fullName",placeholder:"Full Name",component:Se.b,inputType:"input"})," ",r.a.createElement(Pe.a,{name:"lookingForAJob",type:"checkbox",checkboxDescription:"lookingForAJob",component:Se.a})," ",r.a.createElement(Pe.a,{name:"lookingForAJobDescription",placeholder:"lookingForAJobDescription",inputType:"textArea",component:Se.b})," ",r.a.createElement("span",null,r.a.createElement(xe.a,{orientation:"left"},"Contacts: ")),Object.keys(a.contacts).map((function(e){return r.a.createElement(Pe.a,{key:e,name:"contacts."+e,placeholder:e,component:Se.b,inputType:"input"})})),r.a.createElement(Pe.a,{name:"aboutMe",placeholder:"aboutMe",component:Se.b,inputType:"textArea"})," ",r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"SAVE CHANGES")))})),De=Object(je.a)({form:"profileData"})(Le),Re=function(e){var t=e.profile,a=e.changePhoto,o=e.status,l=e.updateStatus,c=e.myId,u=e.saveProfile,i=t.photos.large,s=N.a.Title,p=Object(n.useState)(!1),m=Object(Oe.a)(p,2),f=m[0],d=m[1];if(!t)return r.a.createElement(he,null);return r.a.createElement("div",null,r.a.createElement(A.a,{style:{marginLeft:"0px"},gutter:24},r.a.createElement(x.a,{span:14,className:_e.a.avaNameStatus},r.a.createElement(A.a,{gutter:16},r.a.createElement(x.a,{span:11},r.a.createElement("div",null,r.a.createElement(F.a,{className:_e.a.profileImg,shape:"square",size:300,src:i,icon:r.a.createElement(D.a,null)}))),r.a.createElement(x.a,{span:13,className:_e.a.statusAndName},r.a.createElement(s,{level:3},t.fullName),r.a.createElement(Ae,{currentId:t.userId,myId:c,status:o,updateStatus:l}),t.userId===c?r.a.createElement("input",{type:"file",onChange:function(e){return function(e){e.target.files.length&&a(e.target.files[0])}(e)}}):null))),r.a.createElement(x.a,{span:10},f?r.a.createElement(De,{profile:t,initialValues:t,onSubmit:function(e){u(e),d(!1)}}):r.a.createElement(Fe,{currentId:t.userId,myId:c,activateEditMode:function(){d(!0)},profile:t}))))},Me="my-app/profile/ADD-POST",ze="my-app/profile/SET_STATUS",Ge="my-app/profile/SET_PHOTO",Je={postData:[{id:1,message:"My first post",likeCount:"15"},{id:2,message:"I need to add comment section",likeCount:"20"}],profile:null,status:""},He=function(e){return{type:"my-app/profile/SET_USER_PROFILE",profile:e}},Be=function(e){return function(){var t=Object(H.a)(J.a.mark((function t(a){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e);case 2:n=t.sent,a(He(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ve=function(e){return function(){var t=Object(H.a)(J.a.mark((function t(a){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:n=t.sent,a({type:ze,status:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(V.a)({},e,{postData:[{id:3,message:t.postMessage,likeCount:0}].concat(Object(B.a)(e.postData))});case"my-app/profile/SET_USER_PROFILE":return Object(V.a)({},e,{profile:t.profile});case ze:return Object(V.a)({},e,{status:t.status});case Ge:return Object(V.a)({},e,{profile:Object(V.a)({},e.profile,{photos:t.photo})});default:return e}},We=a(173),Qe=a.n(We),Ye=a(513),Ze=a(518),Xe=a(519),Ke=function(e){var t=Object(n.useState)(e.likeCounter),a=Object(Oe.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(null),u=Object(Oe.a)(c,2),i=u[0],s=u[1],p=Object(n.useState)(!1),m=Object(Oe.a)(p,2),f=m[0],d=m[1],E=[r.a.createElement("span",{key:"comment-basic-like"},r.a.createElement(Te.a,{title:"Like"},r.a.createElement("liked"===i?Ze.a:Xe.a,{onClick:function(){f?(l(+o-1),d(!1),s("")):(l(+o+1),d(!0),s("liked"))}})),r.a.createElement("span",{className:"comment-action"},o))];return r.a.createElement(A.a,{gutter:[0,12]},r.a.createElement(x.a,{span:24},r.a.createElement(Ye.a,{style:{boxShadow:" 0.4em 0.4em 5px rgba(122,122,122,0.5)",borderRadius:"5px",padding:"5px",paddingLeft:"15px",backgroundColor:"white"},actions:E,content:e.message,author:e.fullName,avatar:r.a.createElement(F.a,{size:"large",src:e.photo,icon:r.a.createElement(D.a,null)})})))},$e=Ie(200),et=Object(je.a)({form:"myPosts"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(A.a,null,r.a.createElement(x.a,{span:24,className:Qe.a.myPostField},r.a.createElement(Pe.a,{component:Se.b,validate:[$e],inputType:"textArea",name:"postMessage",inputStyle:{resize:"none"},rows:4,placeholder:"Start writing your post..."}),r.a.createElement("div",null,r.a.createElement(_.a,{htmlType:"submit",type:"primary"},"Add post")))))})),tt=function(e){var t=e.profilePage.profile.userId,a=e.profilePage.postData.map((function(t){return r.a.createElement(Ke,{key:t.id,message:t.message,likeCounter:t.likeCount,fullName:e.profilePage.profile.fullName,photo:e.profilePage.profile.photos.small})}));return r.a.createElement("div",null,t===e.Id?r.a.createElement(et,{onSubmit:function(t){e.addPost(t.postMessage)}}):r.a.createElement("div",{style:{height:"20px"}}),r.a.createElement(A.a,{className:Qe.a.posts},r.a.createElement(x.a,{span:24},a)))},at=Object(z.b)((function(e){return{profilePage:e.profilePage,Id:e.authData.id}}),{addPost:function(e){return{type:Me,postMessage:e}}})(tt),nt=function(e){return r.a.createElement("div",null,r.a.createElement(Re,{saveProfile:e.saveProfile,myId:e.myId,profile:e.profile,status:e.status,updateStatus:e.updateStatus,changePhoto:e.changePhoto}),r.a.createElement(at,null))},rt=Object(be.d)(Object(z.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,myId:e.authData.id}}),{setUserProfile:He,getUsersProfile:Be,getStatus:Ve,updateStatus:function(e){return function(){var t=Object(H.a)(J.a.mark((function t(a,n){var r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().authData.id,t.next=3,K(e);case 3:0===t.sent.data.resultCode?a(Ve(r)):console.error("Server error(updateStatusAPI)");case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},changePhoto:function(e){return function(){var t=Object(H.a)(J.a.mark((function t(a){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e);case 2:n=t.sent,a((r=n.data.photos,{type:Ge,photo:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(H.a)(J.a.mark((function t(a,n){var r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().authData.id,t.next=3,ee(e);case 3:0===t.sent.data.resultCode?a(Be(r)):console.error("Server error(putProfile)");case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),E.g)((function(e){var t=Object(n.useState)(!0),a=Object(Oe.a)(t,2),o=a[0],l=a[1],c=e.match.params.userId||e.myId;return Object(n.useEffect)((function(){c?(l(!0),Promise.all([e.getUsersProfile(c),e.getStatus(c)]).then((function(){l(!1)}))):e.history.push("/login")}),[c]),o?r.a.createElement(he,null):r.a.createElement(nt,e)})),ot=a(250),lt=a.n(ot),ct=a(251),ut=a.n(ct),it=a(514),st=it.a.Header,pt=function(e){return r.a.createElement(st,{className:"header"},r.a.createElement(p.b,{to:"/profile"},r.a.createElement("img",{className:lt.a.siteLogo,alt:"Loading...",src:ut.a})),e.login?r.a.createElement(m.a,{style:{float:"right"},theme:"dark",mode:"horizontal"},r.a.createElement(m.a.Item,{key:"1",onClick:e.logout},"LOGOUT"),r.a.createElement(m.a.Item,{key:"2",disabled:!0},e.login)):r.a.createElement(m.a,{style:{float:"right"},theme:"dark",mode:"horizontal"},r.a.createElement(m.a.Item,{key:"1"},r.a.createElement(p.b,{to:"/login"},"LOGIN"))))},mt=a(60),ft={id:null,email:null,login:null,isAuth:!1,captchaURL:null},dt=function(e,t,a,n){return{type:"my-app/auth/SET_USER_DATA",data:{id:e,email:t,login:a,isAuth:n}}},Et=function(){return function(){var e=Object(H.a)(J.a.mark((function e(t){var a,n,r,o,l;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:0===(a=e.sent).resultCode?(n=a.data,r=n.id,o=n.email,l=n.login,t(dt(r,o,l,!0))):t(dt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},gt=function(){return function(){var e=Object(H.a)(J.a.mark((function e(t){var a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:a=e.sent,t({type:"my-app/auth/SET_CAPTCHA_URL",data:{captchaURL:a.url}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"my-app/auth/SET_USER_DATA":case"my-app/auth/SET_CAPTCHA_URL":return Object(V.a)({},e,{},t.data);default:return e}},bt=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(pt,this.props)}}]),a}(r.a.Component),yt=Object(z.b)((function(e){return{login:e.authData.login,isAuth:e.authData.isAuth}}),{setUserData:dt,getAuth:Et,logout:function(){return function(){var e=Object(H.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:0===e.sent.resultCode?t(Et()):console.error("Cannot get response from API for LOGOUT");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(bt),vt=a(252),Ot=a.n(vt),wt=a(517),_t=a(261),St=Ie(40),Pt=Object(je.a)({form:"login"})((function(e){var t={span:8};return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(Pe.a,{name:"email",wrapperCol:t,validate:[ke,St],placeholder:"Login",inputType:"input",component:Se.b,inputStyle:{marginBottom:"1%"}})),r.a.createElement("div",null,r.a.createElement(Pe.a,{name:"password",type:"password",validate:[ke,St],wrapperCol:t,placeholder:"Password",inputType:"input",component:Se.b})),r.a.createElement("div",null,r.a.createElement(Pe.a,{name:"rememberMe",type:"checkbox",component:Se.a,checkboxDescription:"Remember me"})),e.captchaURL&&r.a.createElement("img",{alt:"Loading...",src:e.captchaURL}),e.captchaURL&&r.a.createElement(Pe.a,{name:"captcha",validate:[ke],placeholder:"Enter captcha",inputType:"input",component:Se.b}),e.error&&r.a.createElement(wt.a,{message:"Failed",description:e.error,type:"error",closable:!0,className:Ot.a.serverError}),r.a.createElement("div",null,r.a.createElement(_t.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"Login"))))})),jt=Object(z.b)((function(e){return{isAuth:e.authData.isAuth,captchaURL:e.authData.captchaURL}}),{login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var r=Object(H.a)(J.a.mark((function r(o){var l;return J.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ae(e,t,a,n);case 2:0===(l=r.sent).resultCode?o(Et()):(10===l.resultCode&&o(gt()),o(Object(mt.a)("login",{_error:l.messages[0]})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return!0===e.isAuth?r.a.createElement(E.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement(xe.a,{orientation:"left"},"Login"),r.a.createElement(Pt,{captchaURL:e.captchaURL,onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)}}))})),kt={initialized:!1},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"my-app/app/INITIALIZED_SUCCESS":var a=Object(V.a)({},e,{initialized:!0});return a;default:return e}},Ct=r.a.lazy((function(){return a.e(3).then(a.bind(null,523))})),Tt=it.a.Content,Ut=it.a.Sider,Nt=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.initializingProcess()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement(p.a,{basename:"/social-network"},r.a.createElement(it.a,{style:{minHeight:"100vh",margin:"auto",backgroundColor:"white"}},r.a.createElement(yt,null),r.a.createElement(it.a,{style:{width:"80%",margin:"auto"}},r.a.createElement(Ut,{width:200}),r.a.createElement(d,null),r.a.createElement(Tt,{style:{margin:"1%",padding:"1%"}},r.a.createElement(E.d,null,r.a.createElement(E.b,{render:function(){return r.a.createElement(rt,null)},path:"/profile/:userId?"}),r.a.createElement(E.b,{render:(e=Ct,function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(he,null)},r.a.createElement(e,t))}),path:"/dialogs"}),r.a.createElement(E.b,{render:g,path:"/news"}),r.a.createElement(E.b,{render:h,path:"/music"}),r.a.createElement(E.b,{render:b,path:"/settings"}),r.a.createElement(E.b,{render:function(){return r.a.createElement(ve,null)},path:"/users"}),r.a.createElement(E.b,{render:function(){return r.a.createElement(jt,null)},path:"/login"}),r.a.createElement(E.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(E.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))))):r.a.createElement(he,null);var e}}]),a}(r.a.Component),At=Object(be.d)(Object(z.b)((function(e){return{initialized:e.appData.initialized}}),{initializingProcess:function(){return function(){var e=Object(H.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Et());case 2:t({type:"my-app/app/INITIALIZED_SUCCESS"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(Nt),xt=a(223),Ft=a(259),Lt=a(226),Dt=Object(be.c)({dialogs:xt.a,profilePage:qe,usersPage:de,authData:ht,form:Lt.a,appData:It}),Rt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||be.d,Mt=Object(be.e)(Dt,Rt(Object(be.a)(Ft.a)));l.a.render(r.a.createElement(z.a,{store:Mt},r.a.createElement(At,null)),document.getElementById("root"))},62:function(e,t,a){e.exports={profileImg:"Profileinfo_profileImg__3AICu",userName:"Profileinfo_userName__2Wlz5",statusAndName:"Profileinfo_statusAndName__3GG_n",profileInfo:"Profileinfo_profileInfo__fgTxQ",avaNameStatus:"Profileinfo_avaNameStatus__1wwhN"}}},[[288,1,2]]]);
//# sourceMappingURL=main.1cc5158a.chunk.js.map